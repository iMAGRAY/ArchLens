# üèóÔ∏è ArchLens MCP Server v1.0.2

**–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∫–æ–¥–∞ –¥–ª—è AI —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤ (Cursor, VSCode, Claude)**

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ì–û–¢–û–í –ö –†–ê–ë–û–¢–ï

–í—Å–µ 4 MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç:
- ‚úÖ `export_ai_compact` - –ü–æ–ª–Ω—ã–π AI –∞–Ω–∞–ª–∏–∑ (~2800 —Ç–æ–∫–µ–Ω–æ–≤)
- ‚úÖ `analyze_project` - –ö—Ä–∞—Ç–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ `get_project_structure` - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏
- ‚úÖ `generate_diagram` - Mermaid –¥–∏–∞–≥—Ä–∞–º–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–±–æ—Ä–∫–∞ ArchLens
```bash
cargo build --release
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π MCP
```bash
cd mcp
npm install
```

### 3. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞
```bash
npm run update-binary
```

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
node test_all_tools.js
```

## üõ†Ô∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ Cursor

–î–æ–±–∞–≤—å—Ç–µ –≤ `.cursor/mcp_settings.json`:

```json
{
  "mcpServers": {
    "archlens": {
      "command": "node",
      "args": ["./path/to/archlens_mcp_server.cjs"],
      "env": {
        "NODE_ENV": "production"
      }
    }
  }
}
```

## üìä –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

### ü§ñ `export_ai_compact`
**–ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–ª—è AI (~2800 —Ç–æ–∫–µ–Ω–æ–≤)**
- Code Smells (20+ —Ç–∏–ø–æ–≤): –¥–ª–∏–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã, –º–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞, –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
- SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏ –∏—Ö –Ω–∞—Ä—É—à–µ–Ω–∏—è
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã: God Objects, tight coupling
- –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞: —Ü–∏–∫–ª–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å, —Ç–µ—Ö–¥–æ–ª–≥
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```typescript
const analysis = await callTool('export_ai_compact', {
  project_path: '/path/to/project',
  focus_critical_only: true  // —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
});
```

### üìä `analyze_project`
**–ö—Ä–∞—Ç–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å –æ—Ü–µ–Ω–∫–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ —Ä–∏—Å–∫–∞**
- –†–∞–∑–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- –û—Ü–µ–Ω–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ —Ä–∏—Å–∫–∞ (–º–∞–ª—ã–π/—Å—Ä–µ–¥–Ω–∏–π/–∫—Ä—É–ø–Ω—ã–π)
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–≥–ª—É–±–ª–µ–Ω–Ω–æ–º—É –∞–Ω–∞–ª–∏–∑—É

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```typescript
const stats = await callTool('analyze_project', {
  project_path: '/path/to/project',
  verbose: true
});
```

### üìÅ `get_project_structure`
**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –≤—ã—è–≤–ª–µ–Ω–∏–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º**
- –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å–ª–æ–µ–≤
- –§–∞–π–ª—ã-–∫–∞–Ω–¥–∏–¥–∞—Ç—ã –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
- –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ —Ç–∏–ø–∞–º —Ñ–∞–π–ª–æ–≤

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```typescript
const structure = await callTool('get_project_structure', {
  project_path: '/path/to/project',
  show_metrics: true,
  max_files: 100
});
```

### üìà `generate_diagram`
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã —Å –ø—Ä–æ–±–ª–µ–º–Ω—ã–º–∏ —Å–≤—è–∑—è–º–∏**
- Mermaid –¥–∏–∞–≥—Ä–∞–º–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Å–≤—è–∑–µ–π (–∫—Ä–∞—Å–Ω—ã–º)
- –ú–µ—Ç—Ä–∏–∫–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –°–ª–æ–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```typescript
const diagram = await callTool('generate_diagram', {
  project_path: '/path/to/project',
  diagram_type: 'mermaid',
  include_metrics: true
});
```

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **`archlens_mcp_server.cjs`** - –ì–ª–∞–≤–Ω—ã–π MCP —Å–µ—Ä–≤–µ—Ä
- **`package.json`** - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
- **Binary Management** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ ArchLens
- **Unified Error Handling** - –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è v1.0.2:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø—É—Ç–µ–π (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ ‚Üí –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ)
- ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å —Ä–µ—à–µ–Ω–∏—è–º–∏
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏–º–µ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–æ–≤—ã–º –≤—ã–≤–æ–¥–æ–º (`generate_diagram`)
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤

## üìã –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

**1. "ArchLens –±–∏–Ω–∞—Ä–Ω–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω"**
```bash
cargo build --release
npm run update-binary
```

**2. "–ü—É—Ç—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–ø–∫–µ

**3. "–û—Ç–∫–∞–∑–∞–Ω–æ –≤ –¥–æ—Å—Ç—É–ø–µ"**
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ –∞–Ω—Ç–∏–≤–∏—Ä—É—Å

### –õ–æ–≥–∏ –æ—Ç–ª–∞–¥–∫–∏:
MCP —Å–µ—Ä–≤–µ—Ä –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤ STDERR:
```
[MCP] –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø—É—Ç–∏: "." ‚Üí "C:\Full\Path"
[MCP] –ó–∞–ø—É—Å–∫ export: archlens.exe export C:\Full\Path ai_compact
[MCP] Export –∑–∞–≤–µ—Ä—à–µ–Ω —Å –∫–æ–¥–æ–º: 0
[MCP] STDOUT –¥–ª–∏–Ω–∞: 1081 bytes
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã:
```bash
# –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
node test_all_tools.js

# –î–µ—Ç–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç —Å –ª–æ–≥–∞–º–∏
node test_detailed.js

# –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç
node test_mcp.js
```

### –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- `export_ai_compact`: ~1000-3000 —Å–∏–º–≤–æ–ª–æ–≤ AI –∞–Ω–∞–ª–∏–∑–∞
- `analyze_project`: ~1500-2000 —Å–∏–º–≤–æ–ª–æ–≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏  
- `get_project_structure`: ~1000-1500 —Å–∏–º–≤–æ–ª–æ–≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- `generate_diagram`: ~5000-10000 —Å–∏–º–≤–æ–ª–æ–≤ Mermaid –¥–∏–∞–≥—Ä–∞–º–º—ã

## üìö –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –í AI –∫–æ–¥–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ Cursor):
```typescript
// –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
const analysis = await tools.export_ai_compact({ 
  project_path: workspace.rootPath,
  focus_critical_only: false 
});

// –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
const criticalIssues = await tools.export_ai_compact({ 
  project_path: workspace.rootPath,
  focus_critical_only: true 
});

// –ë—ã—Å—Ç—Ä–∞—è –æ—Ü–µ–Ω–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
const quickStats = await tools.analyze_project({ 
  project_path: workspace.rootPath 
});

// –î–∏–∞–≥—Ä–∞–º–º–∞ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
const mermaidDiagram = await tools.generate_diagram({ 
  project_path: workspace.rootPath,
  diagram_type: 'mermaid'
});
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ú–∞–ª—ã–µ –ø—Ä–æ–µ–∫—Ç—ã** (<50 —Ñ–∞–π–ª–æ–≤): <2 —Å–µ–∫—É–Ω–¥—ã
- **–°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç—ã** (50-200 —Ñ–∞–π–ª–æ–≤): 2-5 —Å–µ–∫—É–Ω–¥  
- **–ö—Ä—É–ø–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã** (>200 —Ñ–∞–π–ª–æ–≤): 5-15 —Å–µ–∫—É–Ω–¥

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤
- –£–º–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –≥–ª—É–±–∏–Ω–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
- –ù–µ—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤–æ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º

---

**üìß –ü–æ–¥–¥–µ—Ä–∂–∫–∞:** –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

**üéØ –°—Ç–∞—Ç—É—Å:** –°—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è, –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é 